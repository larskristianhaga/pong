events {}

http {
    server {
        listen 80;

        location / {
            # Check if the Accept header prefers JSON
            if ($http_accept ~* "application/json") {
                add_header Content-Type application/json;
                return 200 '{"message": "pong"}';
            }

            # Check if the Accept header prefers XML
            if ($http_accept ~* "application/xml") {
                add_header Content-Type application/xml;
                return 200 '<message>pong</message>';
            }

            # Default response
            add_header Content-Type text/plain;
            return 200 "pong";
        }
    }
}